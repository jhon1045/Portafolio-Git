/*
== COMENTARIOS ==
*/

-- SENTENCIA DDL (CREATE) +TIPO DE OBJETO + NOMBRE DE OBJETO

CREATE DATABASE LIBROSCORPORATIVOS -- CREACION DE LA BASE DE DATOS
GO --ESTO ES COMO EL PUNTO Y COMA DE JAVASCRIP PARA FINALIZAR LA INSTRUCCION

--ESTAMOS INDICANDO EL USO DE BD
USE LIBROSCORPORATIVOS
GO --EL COMANDO GO SIEMPRE SE USA EN OTRA LINEA

--CREAR LA TABLA AUTORES
CREATE TABLE AUTORES(
 PK_CODIGOAUTOR INT NOT NULL,
 CONSTRAINT [PK_AUTORES_CODIGOAUTOR] 
 PRIMARY KEY (PK_CODIGOAUTOR),
 NOMBRECOMPLETO VARCHAR (100) NOT NULL,
 APELLIDOS VARCHAR (100) NOT NULL,
 PAISORIGEN VARCHAR (100) NOT NULL,
)
GO

--CREAR LA TABLA AUTORESXLIBRO
CREATE TABLE AUTORXLIBRO (
FK_CODIGOLIBRO INT  NULL,
CONSTRAINT [FK_AUTORXLIBRO_LIBROS_CODIGOLIBRO]
FOREIGN KEY (FK_CODIGOLIBRO)
REFERENCES LIBROS (PK_CODIGOLIBRO),
FK_CODIGOAUTOR INT NOT NULL,
CONSTRAINT [FK_AUTORXLIBRO_AUTORES_CODIGOAUTOR]
FOREIGN KEY (FK_CODIGOAUTOR)
REFERENCES AUTORES(PK_CODIGOAUTOR)
)
GO

-- CREAMOS LA TABLA EDITORES
CREATE TABLE EDITORIALESS(
 PK_CODIGOEDITORIAL INT NOT NULL,
 CONSTRAINT [PK_EDITORIALES_CODIGOEDITORIAL]
 PRIMARY KEY (PK_CODIGOEDITORIAL),
 NOMBRE VARCHAR (100) NOT NULL,
 PAISORIGEN VARCHAR (100) NULL,
)
GO

-- CREAMOS LA TABLA LIBROS
CREATE TABLE LIBROS(
PK_CODIGOLIBRO INT NOT NULL,
CONSTRAINT [PK_LIBROS_CODIGOLIBRO]
PRIMARY KEY (PK_CODIGOLIBRO),
TITULO VARCHAR (50) NULL,
ISBN VARCHAR NULL,
DESCRIPCION VARCHAR (200) NOT NULL,
NROPAGINAS VARCHAR NOT NULL,
PUBLICACION VARCHAR (20) NULL,
FK_CODIGOEDITORIAL INT NOT NULL
CONSTRAINT [FK_LIBROS_EDITORIALES_CODIGOEDITORIAL]
FOREIGN KEY (FK_CODIGOEDITORIAL)
REFERENCES EDITORIALESS(PK_CODIGOEDITORIAL)
)
GO

-- CREAMOS LA TABLA EJEMPLARES
CREATE TABLE EJEMPLARES (
FK_CODIGOLIBRO INT NOT NULL,
CONSTRAINT [FK_EJEMPLARES_LIBROS_CODIGOLIBRO]
FOREIGN KEY (FK_CODIGOLIBRO)
REFERENCES LIBROS(PK_CODIGOLIBRO),
UBICACION VARCHAR (50) NOT NULL,
ESTADOSOLICITUD VARCHAR (20) NULL,
)
GO

INSERT INTO
AUTORES (PK_CODIGOAUTOR, NOMBRECOMPLETO, APELLIDOS, PAISORIGEN)
VALUES
(001, 'Camilo Andres', 'Piedrahita Angel', 'Colombia'),
(002, 'Carlos Alberto', 'Toro Alzate', 'Colombia'),
(003, 'Diana Maria', 'Perez Ruiz', 'Colombia'),
(004, 'Israel Alberto', 'Saldarriaga Toro', 'Colombia'),
(005, 'Sandra Cecilia', 'Ortiz Piedra', 'Colombia')
go

INSERT INTO 
EDITORIALESS (PK_CODIGOEDITORIAL, NOMBRE, PAISORIGEN)
VALUES
(11, 'Alfaomega', 'Colombia'),
(12, 'Angosta', 'Colombia'),
(13, 'Babel', 'Colombia'),
(14, 'Calixta', 'Caolombia')
GO

INSERT INTO 
LIBROS (PK_CODIGOLIBRO, TITULO, ISBN, DESCRIPCION, NROPAGINAS, PUBLICACION, FK_CODIGOEDITORIAL)
VALUES
(20, 'Bases de Datos 1', '135246975', 'Fundamentos BD', '180', '2016', '11'),
(30, 'Bases de Datos 11', '864135190', 'Gestion BD', '289', '2017', '12'),
(40, 'POO 1', '192386467', 'Introduccion', '389', '2018', '14'),
(50, 'POO 11', '357265964', 'POO Avanzado', '278', '2017', '11'),
(60, 'HTML 5', '536278679', 'Desarrollo Web', '175', '2019', '13'),
(70, 'CSS 3', '375293849', 'Desarrollo Web', '253', '2020', '12')
GO

INSERT INTO
AUTORXLIBRO (FK_CODIGOLIBRO, FK_CODIGOAUTOR)
VALUES
(20, 005),
(30, 001),
(40, 003),
(50, 004),
(60, 002),
(70, 002)
GO

INSERT INTO 
EJEMPLARES(FK_CODIGOLIBRO, UBICACION, ESTADOSOLICITUD)
VALUES
(20, 'Estanteria 1', 'reservado'),
(40, 'Estanteria 2', 'reservado'),
(60, 'Estanteria 3', 'disponible'),
(50, 'Estanteria 2', 'prestado'),
(30, 'Estanteria 1', 'reservado')
GO

